

    <!-- ===========================Form: Textinput =========================== -->

    <div th:fragment="textinput" class="form-group">
        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name=${question.getName()}, id=${question.getId()})" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-textinput (id=${question.getId()}, response=${responses.get(question.getId()).getValue()})" th:remove="tag" />
        </div>
    </div>

    <!-- ===========================Form: Text Area =========================== -->

    <div th:fragment="textarea" class="form-group">
        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name=${question.getName()}, id=${question.getId()})" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
           
            <div th:class="'form-control-wrap '+ (${responses.get(question.getId())?.isMarkedAsComplete()} ? 'marked-as-complete' : '')">
                <div class="form-group_header">
                    Information goes here
                </div>
                 <div th:include="question-type/form-elements :: form-textarea" th:remove="tag" />
            </div>
        </div>
    </div>
    <div th:fragment="readonly_textarea" class="form-group">
        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name=${question.getName()}, id=${question.getId()})" th:remove="tag" />
            <div class="form-control-wrap">
                <div th:include="question-type/form-elements :: form-textarea" th:with="disabled=(true)" th:remove="tag" />
            </div>
        </div>
    </div>

    <!-- ===========================Form: Date input =========================== -->

    <div th:fragment="date" class="form-group">
        <input type="date" />
    </div>

    <!-- ===========================Form: Fileupload =========================== -->
    <div th:fragment="fileupload" class="form-group">
        <div class="form-group">
        <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-label (name=${question.getName()}, id=${question.getId()})" th:remove="tag" />
            <input type="file"/>
    </div>

    </div>

    <!-- ===========================Form: application_details =========================== -->
    <div th:fragment="application_details">
        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Project title', id='application_details-title') " th:remove="tag" />
            <div th:include="question-type/form-elements :: form-hint (hint='Enter the full title of the project')" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-textinput (id='application_details-title', response=${currentApplication.getName()} )" th:remove="tag" />
        </div>

        <div class="form-group">

            <div th:include="question-type/form-elements :: form-label (name='Proposed project timescales', id='details-application-timescale')" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-hint (hint='Enter the target start date and its planned duration. These are indicative at this stage and are not guaranteed')" th:remove="tag" />

            Project start date
            <br/>

            <div th:include="question-type/form-elements :: form-hint (hint='For example: 31 12 2015')" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-dateinput (id='application_details-startdate', day=${currentApplication.getStartDate().getDayOfMonth()}, month=${currentApplication.getStartDate().getMonthValue()}, year=${currentApplication.getStartDate().getYear()})" th:remove="tag" /><br/>
            <div th:include="question-type/form-elements :: form-textduration (id='application_details-duration', months=${currentApplication.getDurationInMonths()})" th:remove="tag" />
        </div>

        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Lead organisation', id='')" th:remove="tag" />
            Nomensa
        </div>

        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Partners', id='')" th:remove="tag" />
            <ul class="list-bullet">
                <li>BAE Systems Plc</li>
                <li>Google Inc.</li>
            </ul>
        </div>
    </div>
    <div th:fragment="readonly_application_details">
        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Project title', id='application_details-title') " th:remove="tag" />
            <div th:include="question-type/form-elements :: form-textinput (id='application_details-title', response=${currentApplication.getName()} )" th:with="disabled=(true)"  th:remove="tag" />
        </div>

        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Proposed project timescales', id='details-application-timescale')" th:remove="tag" />
            Project start date
            <br/>

            <div th:include="question-type/form-elements :: form-dateinput (id='application_details-startdate', day=${currentApplication.getStartDate().getDayOfMonth()}, month=${currentApplication.getStartDate().getMonthValue()}, year=${currentApplication.getStartDate().getYear()})"  th:with="disabled=(true)" th:remove="tag" /><br/>
            <div th:include="question-type/form-elements :: form-textduration (id='application_details-duration', months=${currentApplication.getDurationInMonths()})"  th:with="disabled=(true)" th:remove="tag" />
        </div>

        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Lead organisation', id='')" th:remove="tag" />
            Nomensa
        </div>

        <div class="form-group">
            <div th:include="question-type/form-elements :: form-label (name='Partners', id='')" th:remove="tag" />
            <ul class="list-bullet">
                <li>BAE Systems Plc</li>
                <li>Google Inc.</li>
            </ul>
        </div>
    </div>
    <!-- ===========================Form: empty / no question =========================== -->
    <div th:fragment="empty">
        <div th:utext="${question.getDescription()}"></div>
        <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" ></div>
    </div>

    <!-- ===========================Form: finance =========================== -->
    <div th:fragment="finance">
        <div th:replace="question-type/types :: empty" th:with="$question=(${question})" th:remove="tag" />
        <div class="grid-row">
            <div class="column-half">
                <p>Enter the detailed breakdown of your organisations project costs.</p>
                <a class="button button-large button-block" th:href="@{/application-form/{id}/section/7/?question=1(id=${currentApplication.getId()})}" >Your project costs</a>
                <p class="form-hint icon-info-small-blue">Only you can see this level of detail</p>
            </div>
            <div class="column-half">
                <p>View the summary finances of every partner in your project consortium</p>
                <a class="button button-large button-block" th:href="@{/application-form/{id}/section/8/?question=1(id=${currentApplication.getId()})}">Project financial summary</a>
                <p class="form-hint icon-info-small-blue">All partners can view the financial overview</p>
            </div>
        </div>
    </div>

    <!-- ===========================Form: your_finance =========================== -->
    <div th:fragment="your_finance" th:remove="tag">
        <div class="collapsible">
            <div th:each="subSection : ${currentSection.getChildSections()}" th:if="${currentSection.getChildSections()}!=null"  th:remove="tag">
                <h2 data-th-text="${subSection.getName()}" ></h2>
                <div th:each="question : ${subSection.getQuestions()}" th:class="' '+ (${responses.get(question.getId())?.isMarkedAsComplete()} ? 'marked-as-complete' : '')">
                    <div th:replace="question-type/types :: ${question.getQuestionType().getTitle()}" th:with="$question=(${question}), $responses=(${responses}), $currentApplication=(${currentApplication}), $currentSection=(${subSection})" />
                </div>
            </div>
        </div>
    </div>

    <!-- ===========================Form: labour =========================== -->
    <div th:fragment="labour">
        <div th:each="costCategoryResource : ${applicationFinanceResource.getCostCategoryResources()}" th:if="${costCategoryResource.getQuestionId()} == ${question.getId()}">
            <div class="form-group">
                <table>
                    <tbody>
                    <tr>
                        <th>Working Days per Year</th>
                        <td>
                            <input  class="form-control form-control-1-3 calculation-working-days-js"
                                    disabled=""
                                    type="text"
                                    attr="working_days"
                                    id="working_days"
                                    name="working_days"
                                    th:value="${costCategoryResource.getWorkingDaysPerYear()}" /></td>
                        <td><a href="#">change working days</a></td>
                    </tr>
                    </tbody>
                </table>
                <div class="form-group">
                    <table id="labour-costs-table">
                        <thead>
                        <tr>
                            <th>Role within project</th>
                            <th>Gross Annual Salary</th>
                            <th>Rate (£/day)</th>
                            <th>Days to be spent by all staff at this grade</th>
                        </tr>
                        </thead>
                        <tbody>
                        <div th:each="labourCost : ${costCategoryResource.getLabourCosts()}" >
                            <tr>
                                <td>
                                    <input type="text" name="labour-0-labourRole"  id="id_labour-0-labourRole" th:value="${labourCost.getRole()}"/>
                                </td>
                                <td>
                                    <input type="number" class="calculation-input-js" data-calculation-input="labour-salary" name="labour-0-labourGrossSalary" id="id_labour-0-labourGrossSalary" th:value="${#numbers.formatDecimal(labourCost.getGrossAnnualSalary(),0,0)}" />
                                </td>
                                <td>
                                    <input type="number" name="labour-0-labourRate"  disabled="" id="id_labour-0-labourRate" th:value="${#numbers.formatDecimal(labourCost.getRate(),0,0)}" />
                                </td>
                                <td>
                                    <input type="number" class="calculation-input-js" data-calculation-input="labour-days" name="labour-0-labourDays"  id="id_labour-0-labourDays" th:value="${labourCost.getLabourDays()}" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="4" style="text-align: right;">
                                    Total costs £
                                    <input type="number" class="calculation-result-js calculation-input-total-labour-row-js calculation-input-js"
                                           data-calculation-field="[data-calculation-input=labour-salary],.calculation-working-days-js,[data-calculation-input=labour-days]"
                                           data-calculation-operations="/,*"
                                           data-calculation-input="total-labour-row"
                                           name="labour-0-labourTotalCost"  disabled="" id="id_labour-0-labourTotalCost" th:value="${#numbers.formatDecimal(labourCost.getTotal(),0,0)}"/>
                                </td>
                            </tr>
                        </div>
                        </tbody>
                    </table>

                    <p style="text-align: right;">
                        <div th:text="${costCategoryResource.getId()}"></div>
                        <a th:href="@{/application-form/addanother/{applicationId}/{sectionId}/{id}(id=${costCategoryResource.getCategoryId()},sectionId=${currentSectionId},applicationId=${applicationId})}" class="add-another-row" data-clone-rows="0-1">Add another role</a>
                    </p>
                </div>
                <div class="form-group form-group--align-right">
                    <label>
                        Total labour costs £
                        <input class="form-control form-control-1-4 calculation-total-labour-row-js calculation-result-js"
                               data-calculation-field="[data-calculation-input=total-labour-row]"
                               data-calculation-operations="+"
                               data-calculation-input="total-labour"
                               disabled="" type="text" id="labour-costs-total-field" th:value="${#numbers.formatDecimal(costCategoryResource.getTotal(),0,0)}" />
                    </label>
                </div>
            </div>
            <div class="alignright-button">
                <button class="button" th:unless="${responses.get(question.getId())?.isMarkedAsComplete()}"  type="submit" name="mark_as_complete" th:value="${question.getId()}" >Mark as complete</button>
            </div>
        </div>
    </div>

    <!-- ===========================Form: overheads =========================== -->
    <div th:fragment="overheads">
        <p th:text="${question.getDescription()}"></p>
        <div class="grid-row">
            <div class="column-half" style="font-weight: bold">
                20% of labour costs
            </div>
            <div class="column-half" style="font-weight: bold">
                Calculated rate: £<span id="calculated-rate" data-calculation-field="[data-calculation-input=overhead-calculated]"
                                        data-calculation-operations=""></span>
            </div>
        </div>
        <br/>
        <fieldset>
            <legend>Do you chose to accept this rate?</legend>
            <ul id="id_overheads-acceptRate">
                <li>
                    <label for="id_overheads-acceptRate_0">
                        <input class="block-label" id="id_overheads-acceptRate_0" type="radio" name="overheads-acceptRate" value="yes"/>
                        <span> </span><span>20% of Labour Costs</span>
                    </label>
                </li>
                <li>
                    <label for="id_overheads-acceptRate_1">
                        <input class="block-label" id="id_overheads-acceptRate_1" type="radio" name="overheads-acceptRate" value="no"/>
                        <span> </span>
                        <span >Bespoke rate (I confirm that I will need to justify this rate if this project is granted funding by Innovate UK)</span>
                    </label>
                </li>
            </ul>
        </fieldset>
        <br/>
        <div id="custom-rate" style="display: block;">
            <div class="form-group">
                <label class="form-label" for="id_overheads-customRate">Overhead rate</label>
                <input type="number"
                       name="overheads-customRate"
                       data-calculation-input="overhead-rate"
                       class="form-control form-control-1-8"
                       id="id_overheads-customRate"
                       value="20" /> %
            </div>

            <div class="form-group">
                <label class="form-label" for="id_overheads-calculatedRate">Overhead calculation</label>
                <input type="number" name="overheads-calculatedRate" class="form-control" disabled="" id="id_overheads-calculatedRate"
                       data-calculation-field="[data-calculation-input=total-labour],100,[data-calculation-input=overhead-rate]"
                       data-calculation-operations="/,*"
                       data-calculation-input="overhead-calculated"/>
            </div>
        </div>
        <div class="form-group form-group--align-right">
            <label>
                Total overhead costs £
                <input type="number" name="overheads-totalCosts" class="form-control form-control-1-4" disabled="" id="id_overheads-totalCosts"
                       data-calculation-field="[data-calculation-input=overhead-calculated]"
                       data-calculation-operations=""
                        />
            </label>
        </div>
    </div>

    <!-- ===========================Form: materials =========================== -->
    <div th:fragment="materials">
        <p th:text="${question.getDescription()}"></p>
        <div th:each="costCategoryResource : ${applicationFinanceResource.getCostCategoryResources()}" th:if="${costCategoryResource.getQuestionId()} == ${question.getId()}">

            <div class="form-group">
                <table id="material-costs-table">
                    <thead>
                    <tr>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Cost Per Item</th>
                        <th>Total</th>
                    </tr>
                    </thead>
                    <tbody>
                    <div th:each="materialCost : ${costCategoryResource.getMaterials()}" >
                        <tr>
                            <td>
                                <input type="text" name="materials-0-materialsItem" />
                            </td>
                            <td>
                                <input type="number" name="materials-0-materialsQuantity"
                                       data-calculation-input="materials-item-quantity" />
                            </td>
                            <td>
                                <input type="number" name="materials-0-materialsCostPerItem"
                                       data-calculation-input="materials-item-cost" />
                            </td>
                            <td>
                                <input type="number" name="materials-0-materialsTotal"
                                       data-calculation-field="[data-calculation-input=materials-item-quantity],[data-calculation-input=materials-item-cost]"
                                       data-calculation-operations="*"
                                       disabled="" />
                            </td>
                        </tr>
                    </div>
                    </tbody>
                </table>

                <p style="text-align: right;">
                    <a th:href="@{/application-form/addanother/{applicationId}/{sectionId}/{id}(id=${costCategoryResource.getCategoryId()},sectionId=${currentSectionId},applicationId=${applicationId})}" class="add-another-row" data-clone-rows="0">Add another materials cost</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ===========================Form: capital usage =========================== -->
    <div th:fragment="capital_usage">
        <p th:text="${question.getDescription()}"></p>
        <div th:each="costCategoryResource : ${applicationFinanceResource.getCostCategoryResources()}" th:if="${costCategoryResource.getQuestionId()} == ${question.getId()}">
            <div class="form-row">
                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageItem" class="form-label">Item description</label>
                    <textarea id="id_capitalusage-0-capitalUsageItem" class="form-control form-finances-capital-usage-item" name="capitalusage-0-capitalUsageItem" cols="40" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageNewOrExisting" class="form-label">New or existing item</label>
                    <select id="id_capitalusage-0-capitalUsageNewOrExisting" class="form-control form-finances-capital-usage-existing" name="capitalusage-0-capitalUsageNewOrExisting">
                        <option selected="" value=""></option>
                        <option value="New">New</option>
                        <option value="Existing">Existing</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageDeprecationPeriod" class="form-label">Deprecation period (months)</label>
                    <input type="number" id="id_capitalusage-0-capitalUsageDeprecationPeriod" class="form-control form-finances-capital-usage-depreciation" name="capitalusage-0-capitalUsageDeprecationPeriod" />
                </div>

                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageNPV" class="form-label">NPV at project start or purchase price (£)</label>
                    <input type="number" value="10000" id="id_capitalusage-0-capitalUsageNPV" class="form-control form-finances-capital-usage-npv" name="capitalusage-0-capitalUsageNPV" />
                </div>

                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageResidualValue" class="form-label">Residual value at end of project (£)</label>
                    <input type="number" value="200" id="id_capitalusage-0-capitalUsageResidualValue" class="form-control form-finances-capital-usage-residual-value" name="capitalusage-0-capitalUsageResidualValue" />
                </div>

                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageUtilisation" class="form-label">Utilisation (%)</label>
                    <input type="number" value="20" id="id_capitalusage-0-capitalUsageUtilisation" class="form-control form-finances-capital-usage-utilisation" name="capitalusage-0-capitalUsageUtilisation"/>
                </div>

                <div class="form-group">
                    <label for="id_capitalusage-0-capitalUsageNetCost" class="form-label">Net Cost (£)</label>
                    <input type="number" value="1960" id="id_capitalusage-0-capitalUsageNetCost" disabled="" class="form-control form-finances-capital-usage-cost" name="capitalusage-0-capitalUsageNetCost"/>
                </div>
            </div>
        </div>
    </div>

*** Settings ***
Library           Selenium2Library

*** Test Cases ***
Verify That all the users present in the drop-down
    Given the url is open
    When the guest user clicks the login drop-down
    Then all the users should be visible

Login as Applicant
    Given the url is open
    When the guest user clicks the login drop-down
    And the guest user clicks the log-in button
    Then the guest user should be logged-in as Applicant and redirected to the My applications page

Select one of the applications
    Given the user is logged in as applicant
    #When the user clicks the My application button
    When the Applicant clicks the "Rovel Additive Manufacturing Process" application
    Then the Applicant should see the overview of the selected application

List with sections for the application overview
    Given the Applicant is in the application overview page
    Then the Applicant should see the sections
    #and the Applicant should see the status of each section

List of sub-section in the Myapplication overview page
    Given Applicant is in the my application overview page
    When user clicks the "Applicant details" section
    Then the "Applicant detail" sub-sections should be visible

Scope sub-sections
    Given Applicant is in the my application overview page
    When Applicant clicks the "Scope" section
    Then the "Scope" sub-section should be visible

Business proposition sub-sections
    Given Applicant is in the my application overview page
    When Applicant clicks the "Business proposition" section
    Then the "Business proposition" questions should be visible

project approach sub-sections
    Given Applicant is in the my application overview page
    When Applicant clicks the "Project approach" section
    Then the "Project approach" questions should be visible

Funding sub-sections
    Given Applicant is in the my application overview page
    When Applicant clicks the "Funding" section
    Then the "Funding" questions should be visible

Finances sub-sections
    Given Applicant is in the my application overview page
    When Applicant clicks the "Finances" section
    Then the "Finances" sub-sections should be visible

The Applicant logs-out
    Given the Applicant goes to Dashboard page
    When The Applicant clicks the log-out button
    Then the applicant should be logged-out

*** Keywords ***
all the users should be visible
    Page Should Contain Element    css=#id_user [value="123abc"]
    Page Should Contain Element    css=#id_user [value="456def"]
    Page Should Contain Element    css=#id_user [value="789ghi"]
    Page Should Contain Element    css=#id_user [value="123def"]
    Page Should Contain Element    css=#id_user [value="123ghi"]

the url is open
    Open Browser    http://ifs.test.worth.systems/login

the guest user clicks the login drop-down
    Click Element    css=select.form-control

the guest user clicks the log-in button
    Click Button    css=input.button

the guest user should be logged-in as Applicant and redirected to the My applications page
    Element Should Be Visible    link=Logout

the user is logged in as Applicant
    Location Should Be    http://ifs.test.worth.systems/applicant/dashboard

the Applicant clicks the My application button
    Click Button    id=js-tabs_control-item--00

the Applicant clicks the "Rovel Additive Manufacturing Process" application
    Click Link    link=Rovel Additive Manufacturing Process

the Applicant should see the overview of the selected application
    Location Should Be    http://ifs.test.worth.systems/application/1

the Applicant is in the application overview page
    Location Should Be    http://ifs.test.worth.systems/application/1

the applicant should see the sections
    Page Should Contain Element    link=Application details
    Page Should Contain Element    link=Scope (Gateway question)
    Page Should Contain Element    link=Business proposition (Q1 - Q4)
    Page Should Contain Element    link=Project approach (Q5 - Q8)
    Page Should Contain Element    link=Funding (Q9 - Q10)
    Page Should Contain Element    link=Finances

the Applicant should see the status of each section
    Page Should Contain Element    css=span.section-status

Applicant is in the my application overview page
    Go To    http://ifs.test.worth.systems/application/1

user clicks the "Applicant details" section
    Click Element    link=Application details

the "Applicant detail" sub-sections should be visible
    Page Should Contain Link    link=Application details
    Page Should Contain Link    link=Project Summary
    Page Should Contain Link    link=Public Description

Applicant clicks the "Scope" section
    Click Element    link=Scope (Gateway question)

the "Scope" sub-section should be visible
    Page Should Contain Link    Link=Scope

Applicantclicks the "Business proposition" section
    Click Element    link=Business proposition (Q1 - Q4)

the "Business proposition" questions should be visible
    Page Should Contain Link    link=1. What is the business opportunity that this project addresses?
    Page Should Contain Link    link=2. What is the size of the market opportunity that this project might open up?
    Page Should Contain Link    link=3. How will the results of the project be exploited and disseminated?
    Page Should Contain Link    link=4. What economic, social and environmental benefits is the project expected to deliver?

Applicant clicks the "Project approach" section
    Click Element    link=Project approach (Q5 - Q8)

the "Project approach" questions should be visible
    Page Should Contain Link    link=5. What technical approach will be adopted and how will the project be managed?
    Page Should Contain Link    link=6. What is innovative about this project?
    Page Should Contain Link    link=7. What are the risks (technical, commercial and environmental) to project success? What is the project's risk management strategy?
    Page Should Contain Link    link=8. Does the project team have the right skills and experience and access to facilities to deliver the identified benefits?

Applicant clicks the "Funding" section
    Click Element    link=Funding (Q9 - Q10)

the "Funding" questions should be visible
    Page Should Contain Link    link=9. What is the financial commitment required for the project?
    Page Should Contain Link    link=10. How does financial support from Innovate UK and its funding collaborators add value?

Applicant clicks the "Finances" section
    Click Element    link=Finances

the "Finances" sub-sections should be visible
    Page Should Contain Link    link=Finances
    Page Should Contain Link    link=Your finances
    Page Should Contain Link    link=Project financial summary

the Applicant goes to Dashboard page
    Go To    http://ifs.test.worth.systems/applicant/dashboard

The Applicant clicks the log-out button
    Click Element    link=Logout

the applicant should be logged-out
    Location Should Be    http://ifs.test.worth.systems/login
    Page Should Not Contain Element    link=Logout

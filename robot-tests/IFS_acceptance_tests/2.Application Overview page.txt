*** Settings ***
Library           Selenium2Library
Library           string

*** Test Cases ***
Select one of the applications
    Given the user is logged in as applicant
    When the Applicant clicks the "Rovel Additive Manufacturing Process" application
    Then the Applicant should see the overview of the selected application

List with sections for the application overview
    Given the Applicant is in the application overview page
    Then the applicant should see six sections

Verify that when Applicant clicks the "Scope" this section is expanded
    Given the Applicant is in the application overview page
    Then the Applicant clicks the "Scope" section
    Then the First section should not be expanded
    And the first section should be hidden
    And the second button should be expanded
    And the second section should be visible
    And the "Scope" sub-section should be visible

*** Keywords ***
the user is logged in as Applicant
    Location Should Be    http://ifs.test.worth.systems/applicant/dashboard

the Applicant clicks the "Rovel Additive Manufacturing Process" application
    Click Link    link=Rovel Additive Manufacturing Process

the Applicant should see the overview of the selected application
    Location Should Be    http://ifs.test.worth.systems/application/1/section/1

the Applicant is in the application overview page
    Location Should Be    http://ifs.test.worth.systems/application/1/section/1

the applicant should see six sections
    Page Should Contain Element    css=.section-overview > div:nth-of-type(1)
    Page Should Contain Element    css=.section-overview > div:nth-of-type(2)
    Page Should Contain Element    css=.section-overview > div:nth-of-type(3)
    Page Should Contain Element    css=.section-overview > div:nth-of-type(4)
    Page Should Contain Element    css=.section-overview > div:nth-of-type(5)
    Page Should Contain Element    css=.section-overview > div:nth-of-type(6)

the Applicant clicks the "Scope" section
    [Documentation]    1. click second section
    Click Element    css=.section-overview > h2:nth-of-type(2) button

The First section should not be expanded
    [Documentation]    Assumption: page is loaded with first section option because of /section/1
    ...
    ...
    ...    2. check if the first button is now not expanded anymore (aria-expanded=false)
    ...
    ...    4. check if the second button is now expanded (aria-expanded=true)
    ...
    ...    5. check if the second section is now visible \ (aria-hidden=false)
    Page Should Contain Element    css=.section-overview > h2:nth-of-type(1) button[aria-expanded="false"]

the first section should be hidden
    Page Should Contain Element    css=.section-overview > div:nth-of-type(1)[aria-hidden="true"]

the second button should be expanded
    Page Should Contain Element    css=.section-overview > h2:nth-of-type(2) button[aria-expanded="true"]

the second section should be visible
    Page Should Contain Element    css=.section-overview > div:nth-of-type(2)[aria-hidden="false"]

the "Scope" sub-section should be visible
    Element Should Be Visible    link=How does your application align with the specific competition scope?
